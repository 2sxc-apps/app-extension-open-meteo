@inherits Custom.Hybrid.RazorTyped
@using System.Linq
@using AppCode.Extensions.OpenMeteo
@using AppCode.Extensions.OpenMeteo.Data

@{
  var forecastWithParams = Kit.Data.GetSource<OpenMeteoForecast>(
    parameters: new
    {
      Latitude = 47.3769,
      Longitude = 8.5417,
      Timezone = "auto",
      ForecastDays = 2
    }
  );

  var itemsWithParams = AsList<OpenMeteoResultModel>(forecastWithParams)
    .Take(24)
    .ToList();

  var forecastNoParams = Kit.Data.GetSource<OpenMeteoForecast>();
  var itemsNoParams = AsList<OpenMeteoResultModel>(forecastNoParams)
    .Take(6)
    .ToList();
}

<h3>Open-Meteo Forecast (with parameters, next @itemsWithParams.Count hours)</h3>

<table class="table">
  <thead>
    <tr>
      <th>Time</th>
      <th>Temp (°C)</th>
      <th>Wind</th>
      <th>Code</th>
      <th>Weather</th>
    </tr>
  </thead>
  <tbody>
  @foreach (var item in itemsWithParams)
  {
    <tr>
      <td>@item.When</td>
      <td>@item.Temperature</td>
      <td>@item.WindSpeed</td>
      <td>@item.WeatherCode</td>
      <td>@item.Weather</td>
    </tr>
  }
  </tbody>
</table>

<hr />

<h3>Open-Meteo Forecast (no parameters, sample @itemsNoParams.Count rows)</h3>

<table class="table">
  <thead>
    <tr>
      <th>Time</th>
      <th>Temp (°C)</th>
      <th>Wind</th>
      <th>Code</th>
    </tr>
  </thead>
  <tbody>
  @foreach (var item in itemsNoParams)
  {
    <tr>
      <td>@item.When</td>
      <td>@item.Temperature</td>
      <td>@item.WindSpeed</td>
      <td>@item.WeatherCode</td>
    </tr>
  }
  </tbody>
</table>
